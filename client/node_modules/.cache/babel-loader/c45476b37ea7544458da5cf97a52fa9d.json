{"ast":null,"code":"var _jsxFileName = \"/home/kelly/chat/video-aplicacoes-real-time-socketio/client/src/Chat.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport uuid from 'uuid/v4';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { Picker } from 'emoji-mart';\nimport { Button } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nconst myId = uuid();\nconst socket = io('http://localhost:8080');\nsocket.on('connect', () => console.log('[IO] Connect => A new connection has been established'));\n\nconst Chat = () => {\n  const [message, updateMessage] = useState('');\n  const [messages, updateMessages] = useState([]);\n  const ref = useRef();\n  const [isOpen, setIsOpen] = useState(false);\n  useEffect(() => {\n    const handleNewMessage = newMessage => updateMessages([...messages, newMessage]);\n\n    socket.on('chat.message', handleNewMessage);\n    return () => socket.off('chat.message', handleNewMessage);\n  }, [messages]);\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    if (message.trim()) {\n      socket.emit('chat.message', {\n        id: myId,\n        message\n      });\n      updateMessage('');\n    }\n  };\n\n  const handleInputChange = event => updateMessage(event.target.value);\n\n  const addEmoji = e => {\n    let sym = e.unified.split('-');\n    let codesArray = [];\n    sym.forEach(el => codesArray.push('0x' + el));\n    let emoji = String.fromCodePoint(...codesArray);\n    updateMessage(message + emoji);\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, messages.map((m, index) => /*#__PURE__*/React.createElement(\"li\", {\n    className: `list__item list__item--${m.id === myId ? 'mine' : 'other'}`,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: `message message--${m.id === myId ? 'mine' : 'other'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }, m.message)))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    autoComplete: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form__field\",\n    onChange: handleInputChange,\n    placeholder: \"Type a new message here\",\n    type: \"text\",\n    value: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }), \"Enviar\"))));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/home/kelly/chat/video-aplicacoes-real-time-socketio/client/src/Chat.js"],"names":["React","useEffect","useRef","useState","io","uuid","Picker","Button","SendIcon","myId","socket","on","console","log","Chat","message","updateMessage","messages","updateMessages","ref","isOpen","setIsOpen","handleNewMessage","newMessage","off","handleFormSubmit","event","preventDefault","trim","emit","id","handleInputChange","target","value","addEmoji","e","sym","unified","split","codesArray","forEach","el","push","emoji","String","fromCodePoint","map","m","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport io from 'socket.io-client'\nimport uuid from 'uuid/v4'\n\nimport 'emoji-mart/css/emoji-mart.css'\nimport {Picker} from 'emoji-mart'\nimport { Button } from '@material-ui/core'\nimport SendIcon from '@material-ui/icons/Send';\n\nconst myId = uuid()\nconst socket = io('http://localhost:8080')\nsocket.on('connect', () => console.log('[IO] Connect => A new connection has been established'))\n\nconst Chat = () => {\n    const [message, updateMessage] = useState('')\n    const [messages, updateMessages] = useState([])\n    const ref = useRef();\n  const [isOpen, setIsOpen] = useState(false);\n\n    useEffect(() => {\n        const handleNewMessage = newMessage =>\n            updateMessages([...messages, newMessage])\n        socket.on('chat.message', handleNewMessage)\n        return () => socket.off('chat.message', handleNewMessage)\n    }, [messages])\n\n    const handleFormSubmit = event => {\n        event.preventDefault()\n        if (message.trim()) {\n            socket.emit('chat.message', {\n                id: myId,\n                message\n            })\n            updateMessage('')\n        }\n    }\n\n    const handleInputChange = event =>\n        updateMessage(event.target.value)\n    \n    const addEmoji = e => {\n        let sym = e.unified.split('-')\n        let codesArray = []\n        sym.forEach(el => codesArray.push('0x' + el))\n        let emoji = String.fromCodePoint(...codesArray)\n        updateMessage(message + emoji)\n    }\n\n    return (\n        <main className=\"container\">\n            <ul className=\"list\">\n                { messages.map((m, index) => (\n                    <li\n                        className={`list__item list__item--${m.id === myId ? 'mine' : 'other'}`}\n                        key={index}\n                    >\n                        <span className={`message message--${m.id === myId ? 'mine' : 'other'}`}>\n                            { m.message }\n                        </span>\n                    </li>\n                ))}\n            </ul>\n            <form className=\"form\" autoComplete={false}  >\n                <input\n                    className=\"form__field\"\n                    onChange={handleInputChange}\n                    placeholder=\"Type a new message here\"\n                    type=\"text\"\n                    value={message}\n                >\n            {/*     <button>\n\n                 \n                 <Picker set=\"apple\"\n                style={{\n                    position: 'absolute',\n                    zIndex: 1000,\n                    bottom: '50px',\n                }}\n                onSelect={addEmoji}\n                autoFocus={isOpen} /> \n                </button> */}\n                <Button  onClick={handleFormSubmit} > \n                    <SendIcon />\n                    Enviar\n                </Button>\n                </input>\n            </form>\n        </main>\n    )\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}