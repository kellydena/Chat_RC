{"ast":null,"code":"var _jsxFileName = \"/home/kelly/chat/video-aplicacoes-real-time-socketio/client/src/Chat.js\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport io from 'socket.io-client';\nimport uuid from 'uuid/v4';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { Picker } from 'emoji-mart';\nimport { Button, IconButton, TextField } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport SentimentSatisfiedOutlinedIcon from '@material-ui/icons/SentimentSatisfiedOutlined';\nconst myId = uuid();\nconst socket = io('http://localhost:8080');\nsocket.on('connect', () => console.log('[IO] Connect => A new connection has been established'));\n\nconst Chat = () => {\n  const [message, updateMessage] = useState('');\n  const [messages, updateMessages] = useState([]);\n  const ref = useRef();\n  const [isOpen, setIsOpen] = useState(false);\n  useEffect(() => {\n    const handleNewMessage = newMessage => updateMessages([...messages, newMessage]);\n\n    socket.on('chat.message', handleNewMessage);\n    return () => socket.off('chat.message', handleNewMessage);\n  }, [messages]);\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    if (message.trim()) {\n      socket.emit('chat.message', {\n        id: myId,\n        message\n      });\n      updateMessage('');\n    }\n  };\n\n  const handleInputChange = event => updateMessage(event.target.value);\n\n  const addEmoji = e => {\n    let sym = e.unified.split('-');\n    let codesArray = [];\n    sym.forEach(el => codesArray.push('0x' + el));\n    let emoji = String.fromCodePoint(...codesArray);\n    updateMessage(message + emoji);\n  };\n\n  const handleSetEmojis = e => {\n    setIsOpen(!isOpen);\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, messages.map((m, index) => /*#__PURE__*/React.createElement(\"li\", {\n    className: `list__item list__item--${m.id === myId ? 'mine' : 'other'}`,\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: `message message--${m.id === myId ? 'mine' : 'other'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  }, m.message)))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: handleFormSubmit,\n    autoComplete: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    className: \"formField\",\n    onChange: handleInputChange,\n    placeholder: \"Digite uma mensagem\",\n    type: \"text\",\n    value: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleSetEmojis,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SentimentSatisfiedOutlinedIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 19\n    }\n  }), isOpen ? /*#__PURE__*/React.createElement(Picker, {\n    set: \"apple\",\n    style: {\n      position: 'absolute',\n      zIndex: 1000,\n      bottom: '50px'\n    },\n    onSelect: addEmoji,\n    autoFocus: isOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }) : null), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }), \"Enviar\")));\n};\n\nexport default Chat;","map":{"version":3,"sources":["/home/kelly/chat/video-aplicacoes-real-time-socketio/client/src/Chat.js"],"names":["React","useEffect","useRef","useState","io","uuid","Picker","Button","IconButton","TextField","SendIcon","SentimentSatisfiedOutlinedIcon","myId","socket","on","console","log","Chat","message","updateMessage","messages","updateMessages","ref","isOpen","setIsOpen","handleNewMessage","newMessage","off","handleFormSubmit","event","preventDefault","trim","emit","id","handleInputChange","target","value","addEmoji","e","sym","unified","split","codesArray","forEach","el","push","emoji","String","fromCodePoint","handleSetEmojis","map","m","index","position","zIndex","bottom"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport io from 'socket.io-client'\nimport uuid from 'uuid/v4'\n\nimport 'emoji-mart/css/emoji-mart.css'\nimport {Picker} from 'emoji-mart'\nimport { Button, IconButton, TextField } from '@material-ui/core'\nimport SendIcon from '@material-ui/icons/Send';\nimport SentimentSatisfiedOutlinedIcon from '@material-ui/icons/SentimentSatisfiedOutlined';\nconst myId = uuid()\nconst socket = io('http://localhost:8080')\nsocket.on('connect', () => console.log('[IO] Connect => A new connection has been established'))\n\nconst Chat = () => {\n    const [message, updateMessage] = useState('')\n    const [messages, updateMessages] = useState([])\n    const ref = useRef();\n  const [isOpen, setIsOpen] = useState(false);\n\n    useEffect(() => {\n        const handleNewMessage = newMessage =>\n            updateMessages([...messages, newMessage])\n        socket.on('chat.message', handleNewMessage)\n        return () => socket.off('chat.message', handleNewMessage)\n    }, [messages])\n\n    const handleFormSubmit = event => {\n        event.preventDefault()\n        if (message.trim()) {\n            socket.emit('chat.message', {\n                id: myId,\n                message\n            })\n            updateMessage('')\n        }\n    }\n\n    const handleInputChange = event =>\n        updateMessage(event.target.value)\n    \n    const addEmoji = e => {\n        let sym = e.unified.split('-')\n        let codesArray = []\n        sym.forEach(el => codesArray.push('0x' + el))\n        let emoji = String.fromCodePoint(...codesArray)\n        updateMessage(message + emoji)\n    }\n    const handleSetEmojis = e =>{\n      setIsOpen(!isOpen)\n    }\n\n    return (\n        <main className=\"container\">\n            <ul className=\"list\">\n                { messages.map((m, index) => (\n                    <li\n                        className={`list__item list__item--${m.id === myId ? 'mine' : 'other'}`}\n                        key={index}\n                    >\n                        <span className={`message message--${m.id === myId ? 'mine' : 'other'}`}>\n                            { m.message }\n                        </span>\n                    </li>\n                ))}\n            </ul>\n            <form className=\"form\" onSubmit={handleFormSubmit} autoComplete={false}  >\n                <TextField\n                    className=\"formField\"\n                    onChange={handleInputChange}\n                    placeholder=\"Digite uma mensagem\"\n                    type=\"text\"\n                    value={message}\n                >\n            {/*     <button>\n\n                 \n                 <Picker set=\"apple\"\n                style={{\n                    position: 'absolute',\n                    zIndex: 1000,\n                    bottom: '50px',\n                }}\n                onSelect={addEmoji}\n                autoFocus={isOpen} /> \n                </button> */}\n                </TextField>\n                <IconButton onClick={handleSetEmojis}>\n                  <SentimentSatisfiedOutlinedIcon fontSize='small' />\n                  {isOpen ? \n                    <Picker set=\"apple\"\n                    style={{\n                        position: 'absolute',\n                        zIndex: 1000,\n                        bottom: '50px',\n                    }}\n                    onSelect={addEmoji}\n                    autoFocus={isOpen} /> \n                  : null}\n                </IconButton>\n                <Button  onClick={handleFormSubmit} > \n                    <SendIcon fontSize='small' />\n                    Enviar\n                </Button>\n            </form>\n        </main>\n    )\n}\n\nexport default Chat\n"]},"metadata":{},"sourceType":"module"}